# Data Dictionary Generator

A Python package to automatically generate metadata (data dictionaries) for clinical datasets using a large language model (LLM) via Ollama. This tool takes in dataset files (CSV format), processes them, and generates descriptions for each column in the dataset, as well as other metadata like data types and sample data.

## Features
- Automatically generate descriptions for each column in a dataset.
- Handle multiple CSV files in a folder.
- Support integration with Ollama LLM for generating metadata descriptions.
- Option to save the generated metadata in CSV format.

## Requirements

Make sure you have Python 3.8+ installed, along with the following dependencies:

- **pandas**: For handling and processing the dataset.
- **requests**: For HTTP requests (if needed).
- **ollama**: For generating metadata descriptions using Ollama's LLM.
- **torch**: PyTorch for deep learning operations (used with Ollama).
- **transformers**: Hugging Face Transformers library, if you're using other LLMs.

Install dependencies using the following command:
```bash
pip install -r requirements.txt
```

## Installation

Clone the repository:

```bash
git clone https://github.com/rafgia/data-dictionary-generator.git
cd data-dictionary-generator
```

Install the required Python packages:

```bash
pip install -r requirements.txt
```

## Usage

### Command-line Interface

Once the package is installed, you can use the command line to generate metadata for your dataset(s).

To run the tool, use the following command:

```bash
python generate_metadata.py
```

This will prompt you to provide the folder path where your CSV files are located and the dataset name.

### Example

1. **Prepare your data files**:
   Place all your CSV files (representing tables in your dataset) in a folder, e.g., `data/ORCHID`.

2. **Run the generator**:

   ```bash
   python generate_metadata.py
   ```

3. **Provide the necessary inputs**:
   - Enter the path to your folder containing CSV files.
   - Specify the dataset name (e.g., `ORCHID`).

The script will generate metadata for each column in the dataset and save it in a new CSV file (`dataDictionary.csv`).

### Sample Output:

For each column in your dataset, the following metadata will be generated:
- **Column Name**: Name of the column in the dataset.
- **Table Name**: Name of the table (CSV filename).
- **Dataset Name**: The name you provided for the dataset.
- **Sample Data**: A sample of 5 data points from the column.
- **Data Type**: The data type of the column (e.g., integer, float).
- **Column Description**: A description generated by the model for the column.
  
### Example of generated metadata:

| table_name | dataset_name | column_name | sample_data     | data_type | column_description                      |
|------------|--------------|-------------|-----------------|-----------|------------------------------------------|
| patients   | ORCHID       | age         | [45, 60, 50, ...]| integer   | Age of the patient in years.             |
| results    | ORCHID       | result      | [positive, ...] | string    | The result of the test.                  |

## Troubleshooting

### 1. If you encounter an error such as `model not found`, make sure you have set up Ollama correctly and the model is available.
   - Ensure that you can manually run the model using `ollama run deepseek-r1:1.5b` from the command line before using it in the Python script.

### 2. If the dependencies are not installing, make sure you're using the correct Python version and have all required libraries listed in `requirements.txt`.

### 3. If the dataset is very large, consider breaking it down into smaller CSV files for more efficient processing.

## Contributing

If you would like to contribute to this project, feel free to fork the repository and submit a pull request. Make sure to add tests and document any new features.

### To contribute:
1. Fork the repository.
2. Create a new branch (`git checkout -b feature-name`).
3. Make your changes and commit them (`git commit -am 'Add new feature'`).
4. Push to the branch (`git push origin feature-name`).
5. Open a pull request.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## Author

Raffaele Giancotti
```

